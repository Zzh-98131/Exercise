<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script src="https://unpkg.com/vue"></script>
	</head>
	<body>
		<button onclick="reg()">正则验证邮箱</button>
		<button onclick="bibao()">闭包</button>
		<button onclick="theMost()">判断最多</button>
		<button onclick="getKeyValue()">获取URL尾部键值对</button>
		<p id="counter">0</p>
		<script>
			// 正则验证邮箱
			function reg() {
				while(1) {
					var str = prompt()
					if (str === '++') break
					// var reg = /^\w+@([a-zA-z0-9]{2,}.)*[a-zA-z0-9]+.[a-z]{2,4}$/
					var reg = /^b?a*$/
					alert(reg.test(str))
				}
			}
			
			// 闭包
			var add = (function () {
				var counter = 0
				console.log(counter) // 不执行
				return function (){
					return ++counter
				}
			})()
			function bibao() {
				document.getElementById('counter').innerHTML = add()
			}
			
			// 判断最多
			function theMost() {
				var lines = prompt().split('')
				var words = Array.from(new Set(lines))
				var counts = []
				var result = []
				var mostIndex = 0
				for (line of lines) {
					for (let i = 0; i < words.length; i++) {
						if (line === words[i]) {
							if (counts[i] !== undefined) {
								counts[i]++
							} else {
								counts[i] = 1
							}
						}
					}
				}
				for (let i = 0; i < counts.length; i++) {
					if (counts[i] > counts[mostIndex]) {
						mostIndex = i
					}
				}
				for (let i = 0; i < counts.length; i++) {
					if (counts[i] === counts[mostIndex]) {
						result.push(words[i] + ' ' + counts[i])
					}
				}
				result.forEach(e => {
					console.log(e)
				})
			}
			
			// 获取URL尾部键值对
			function getKeyValue() {
				//http://localhost:8080/#/monitor/device/detail?deviceId=13826&categoryId=24
				var lines = prompt().split('?')[1].split('&')
				var results = []
				for (line of lines) {
					const key = line.split('=')[0]
					const value = line.split('=')[1]
					results.push({
						key: key,
						value: value
					})
				}
				for (result of results) {
					console.log(result.key, result.value)
				}
			}
		</script>
	</body>
</html>
